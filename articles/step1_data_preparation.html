<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>1 - Data Preparation • swaRmverse</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="1 - Data Preparation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">swaRmverse</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/step1_data_preparation.html">1 - Data Preparation</a></li>
    <li><a class="dropdown-item" href="../articles/step2_data_analysis.html">2 - Data Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/step3_swarm_space.html">3 - The Swarm-Verse</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/marinapapa/swaRmverse/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>1 - Data Preparation</h1>
                        <h4 data-toc-skip class="author">Marina
Papadopoulou</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/marinapapa/swaRmverse/blob/main/vignettes/step1_data_preparation.Rmd" class="external-link"><code>vignettes/step1_data_preparation.Rmd</code></a></small>
      <div class="d-none name"><code>step1_data_preparation.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="input-data---trackdf">1.1 Input data - trackdf<a class="anchor" aria-label="anchor" href="#input-data---trackdf"></a>
</h2>
<p>The <code>swaRmverse</code> package uses the <a href="https://github.com/swarm-lab/trackdf" class="external-link"><code>trackdf</code></a>
package to standardize the input dataset. Data are expected to be
trajectories (id, x, y, t) generated by GPS or video tracking. First,
lets load some data from <code>trackdf</code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://marinapapa.github.io/swaRmverse/">swaRmverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/video/01.csv"</span>, package <span class="op">=</span> <span class="st">"trackdf"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">raw</span> <span class="op">&lt;-</span> <span class="va">raw</span><span class="op">[</span><span class="op">!</span><span class="va">raw</span><span class="op">$</span><span class="va">ignore</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   id         x        y size frame track ignore track_fixed</span></span>
<span><span class="co">## 1  1  629.3839 882.4783 1154     1     1  FALSE           1</span></span>
<span><span class="co">## 2  2 1056.1692 656.5207 1064     1     2  FALSE           2</span></span>
<span><span class="co">## 3  3  508.0092 375.2451 1624     1     3  FALSE           3</span></span>
<span><span class="co">## 4  4 1277.6466 373.7491 1443     1     4  FALSE           4</span></span>
<span><span class="co">## 5  5 1379.2844 343.0853 1431     1     5  FALSE           5</span></span>
<span><span class="co">## 6  6 1137.1378 174.5110 1321     1     6  FALSE           6</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="transform-data">1.2 Transform data<a class="anchor" aria-label="anchor" href="#transform-data"></a>
</h2>
<p><code>trackdf</code> takes as input a vector for each positional time
series (x,y) along with an vector of ids and time. Time will be
transformed to date-time POSIXct format. Without additional information,
the package uses UTC as timezone, current time as the origin of the
experiment, and 1 second as the sampling step (time between
observations). If your <em>t</em> column corresponds to real time (and
not frames or sampling steps, e.g., <em>c(1, 2, 3, 4)</em>), then the
period doesn’t have to be specified. For more details, see <a href="https://swarm-lab.github.io/trackdf/index.html" class="external-link uri">https://swarm-lab.github.io/trackdf/index.html</a>. For now,
let’s specify these attributes and create our main dataset (as a
dataframe):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_data_format.html">set_data_format</a></span><span class="op">(</span>raw_x <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">x</span>,</span>
<span>                          raw_y <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">y</span>,</span>
<span>                          raw_t <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">frame</span>,</span>
<span>                          raw_id <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">track_fixed</span>,</span>
<span>                          origin <span class="op">=</span> <span class="st">"2020-02-1 12:00:21"</span>,</span>
<span>                          period <span class="op">=</span> <span class="st">"0.04S"</span>,</span>
<span>                          tz <span class="op">=</span> <span class="st">"America/New_York"</span></span>
<span>                          <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data_df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Track table [6 observations]</span></span>
<span><span class="co">## Number of tracks:  6 </span></span>
<span><span class="co">## Dimensions:  2D </span></span>
<span><span class="co">## Geographic:  FALSE </span></span>
<span><span class="co">## Table class:  data frame ('data.frame')</span></span>
<span><span class="co">##   id                   t         x        y        set</span></span>
<span><span class="co">## 1  1 2020-02-01 12:00:21  629.3839 882.4783 2020-02-01</span></span>
<span><span class="co">## 2  2 2020-02-01 12:00:21 1056.1692 656.5207 2020-02-01</span></span>
<span><span class="co">## 3  3 2020-02-01 12:00:21  508.0092 375.2451 2020-02-01</span></span>
<span><span class="co">## 4  4 2020-02-01 12:00:21 1277.6466 373.7491 2020-02-01</span></span>
<span><span class="co">## 5  5 2020-02-01 12:00:21 1379.2844 343.0853 2020-02-01</span></span>
<span><span class="co">## 6  6 2020-02-01 12:00:21 1137.1378 174.5110 2020-02-01</span></span></code></pre>
<p>You can now notice that a ‘set’ column is added to the dataset.
<code>swaRmverse</code> is using this column as the main unit for
grouping the tracks into separate events. By default, the day of data
collection is used.</p>
</div>
<div class="section level2">
<h2 id="multi-species-or-multi-context-data">1.3 Multi-species or multi-context data<a class="anchor" aria-label="anchor" href="#multi-species-or-multi-context-data"></a>
</h2>
<p>As mentioned above, <code>swaRmverse</code> uses the date as a
default data organization unit. However, if several separate
observations are conducted in the same day, or an additional label on
the data is needed, such as context or species, additional information
can be given to the function. For instance, let’s assume that data from
2 different contexts exist in the data set:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># dummy column</span></span>
<span><span class="va">raw</span><span class="op">$</span><span class="va">context</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"ctx1"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">raw</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"ctx2"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">raw</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>We can give any additional vector to the function and it will be
combined with the date column as a set:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_data_format.html">set_data_format</a></span><span class="op">(</span>raw_x <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">x</span>,</span>
<span>                          raw_y <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">y</span>,</span>
<span>                          raw_t <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">frame</span>,</span>
<span>                          raw_id <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">track_fixed</span>,</span>
<span>                          origin <span class="op">=</span> <span class="st">"2020-02-1 12:00:21"</span>,</span>
<span>                          period <span class="op">=</span> <span class="st">"0.04 seconds"</span>,</span>
<span>                          tz <span class="op">=</span> <span class="st">"America/New_York"</span>,</span>
<span>                          raw_context <span class="op">=</span> <span class="va">raw</span><span class="op">$</span><span class="va">context</span></span>
<span>                          <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data_df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Track table [6 observations]</span></span>
<span><span class="co">## Number of tracks:  6 </span></span>
<span><span class="co">## Dimensions:  2D </span></span>
<span><span class="co">## Geographic:  FALSE </span></span>
<span><span class="co">## Table class:  data frame ('data.frame')</span></span>
<span><span class="co">##   id                   t         x        y             set</span></span>
<span><span class="co">## 1  1 2020-02-01 12:00:21  629.3839 882.4783 2020-02-01_ctx1</span></span>
<span><span class="co">## 2  2 2020-02-01 12:00:21 1056.1692 656.5207 2020-02-01_ctx1</span></span>
<span><span class="co">## 3  3 2020-02-01 12:00:21  508.0092 375.2451 2020-02-01_ctx1</span></span>
<span><span class="co">## 4  4 2020-02-01 12:00:21 1277.6466 373.7491 2020-02-01_ctx1</span></span>
<span><span class="co">## 5  5 2020-02-01 12:00:21 1379.2844 343.0853 2020-02-01_ctx1</span></span>
<span><span class="co">## 6  6 2020-02-01 12:00:21 1137.1378 174.5110 2020-02-01_ctx1</span></span></code></pre>
<p>With this dataset, we can move on into analyzing the collective
motion in the data.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.marinapapadopoulou.com" class="external-link">Marina Papadopoulou</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
